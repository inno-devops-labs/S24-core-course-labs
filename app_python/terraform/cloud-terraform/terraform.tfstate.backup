{
  "version": 4,
  "terraform_version": "1.7.4",
  "serial": 3,
  "lineage": "b2104030-fd54-1291-e456-15f15398f8f3",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "template_file",
      "name": "default",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "f81b25eca6dd9dd17d30ef472e55332e6247c8306e0eb37dc69cda0bd456e491",
            "rendered": "#ps1\r\n# ^^^ 'ps1' is only for cloudbase-init, some sort of sha-bang in linux\r\n\r\n# logging\r\nStart-Transcript -Path \"$ENV:SystemDrive\\provision.txt\" -IncludeInvocationHeader -Force\r\n\"Bootstrap script started\" | Write-Host\r\n\r\n# inserting value's from terraform\r\n$MyUserName = \"user-katykosh\"\r\n$MyPlainTextPassword = \"password1\"\r\nif (-not [string]::IsNullOrEmpty($MyUserName) -and -not [string]::IsNullOrEmpty($MyPlainTextPassword)) {\r\n    \"Create user\" | Write-Host\r\n    $MyPassword = $MyPlainTextPassword | ConvertTo-SecureString -AsPlainText -Force\r\n    $MyUser = New-LocalUser -Name $MyUserName -Password $MyPassword -PasswordNeverExpires -AccountNeverExpires\r\n    $MyUser | Add-LocalGroupMember -Group 'Administrators'\r\n    $MyUser | Add-LocalGroupMember -Group 'Remote Management Users'\r\n}\r\n\r\n# inserting value's from terraform\r\n$MyAdministratorPlainTextPassword = \"password2\"\r\nif (-not [string]::IsNullOrEmpty($MyAdministratorPlainTextPassword)) {\r\n    \"Set local administrator password\" | Write-Host\r\n    $MyAdministratorPassword = $MyAdministratorPlainTextPassword | ConvertTo-SecureString -AsPlainText -Force\r\n    # S-1-5-21domain-500 is a well-known SID for Administrator\r\n    # https://docs.microsoft.com/en-us/troubleshoot/windows-server/identity/security-identifiers-in-windows\r\n    $MyAdministrator = Get-LocalUser | Where-Object -Property \"SID\" -like \"S-1-5-21-*-500\"\r\n    $MyAdministrator | Set-LocalUser -Password $MyAdministratorPassword\r\n}\r\n\r\n\"Bootstrap script ended\" | Write-Host",
            "template": "#ps1\r\n# ^^^ 'ps1' is only for cloudbase-init, some sort of sha-bang in linux\r\n\r\n# logging\r\nStart-Transcript -Path \"$ENV:SystemDrive\\provision.txt\" -IncludeInvocationHeader -Force\r\n\"Bootstrap script started\" | Write-Host\r\n\r\n# inserting value's from terraform\r\n$MyUserName = \"${ user_name }\"\r\n$MyPlainTextPassword = \"${ user_pass }\"\r\nif (-not [string]::IsNullOrEmpty($MyUserName) -and -not [string]::IsNullOrEmpty($MyPlainTextPassword)) {\r\n    \"Create user\" | Write-Host\r\n    $MyPassword = $MyPlainTextPassword | ConvertTo-SecureString -AsPlainText -Force\r\n    $MyUser = New-LocalUser -Name $MyUserName -Password $MyPassword -PasswordNeverExpires -AccountNeverExpires\r\n    $MyUser | Add-LocalGroupMember -Group 'Administrators'\r\n    $MyUser | Add-LocalGroupMember -Group 'Remote Management Users'\r\n}\r\n\r\n# inserting value's from terraform\r\n$MyAdministratorPlainTextPassword = \"${ admin_pass }\"\r\nif (-not [string]::IsNullOrEmpty($MyAdministratorPlainTextPassword)) {\r\n    \"Set local administrator password\" | Write-Host\r\n    $MyAdministratorPassword = $MyAdministratorPlainTextPassword | ConvertTo-SecureString -AsPlainText -Force\r\n    # S-1-5-21domain-500 is a well-known SID for Administrator\r\n    # https://docs.microsoft.com/en-us/troubleshoot/windows-server/identity/security-identifiers-in-windows\r\n    $MyAdministrator = Get-LocalUser | Where-Object -Property \"SID\" -like \"S-1-5-21-*-500\"\r\n    $MyAdministrator | Set-LocalUser -Password $MyAdministratorPassword\r\n}\r\n\r\n\"Bootstrap script ended\" | Write-Host",
            "vars": {
              "admin_pass": "password2",
              "user_name": "user-katykosh",
              "user_pass": "password1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    }
  ],
  "check_results": null
}
